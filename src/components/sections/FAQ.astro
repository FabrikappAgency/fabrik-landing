---
import { t } from "i18next";
import { Trans } from "astro-i18next/components";
import { useState } from "react";
const questions = t("faq.questions", { returnObjects: true });
const half = Math.ceil(questions.length / 2);
const leftSideQuestions = questions.slice(0, half);
const rightSideQuestions = questions.slice(half, questions.length);
---

<section
  class="py-12 bg-gray-900 sm:py-16 md:py-20 lg:py-24 pb-28"
  data-primary="purple-600"
  id={t("navigation.faq").toLowerCase()}
>
  <div class="px-8 mx-auto lg:px-16 max-w-7xl">
    <div
      class="flex flex-col mb-7 sm:mb-20 items-start md:items-center justify-center"
    >
      <h1
        class="mb-6 text-5xl font-extrabold leading-none max-w-5xl mx-auto tracking-normal sm:text-6xl md:text-6xl lg:text-7xl md:tracking-tight text-white"
      >
        <span
          class="w-full text-transparent bg-clip-text bg-gradient-to-r from-green-400 via-blue-400 to-purple-400 lg:inline"
        >
          {t("faq.title")}
        </span>
      </h1>
    </div>
    <div class="relative flex flex-col mt-16 lg:flex-row">
      {/* <!-- Left side of FAQs --> */}
      <div class="relative w-full space-y-3 lg:space-y-5 lg:w-1/2 lg:pr-4">
        {/* <!-- Question 1 --> */}
        {
          leftSideQuestions.map((item, index) => (
            <div
              class="relative px-6 py-2 overflow-hidden text-white bg-gray-900 rounded-lg select-none border"
              data-primary="purple-600"
              data-rounded="rounded-lg"
              data-rounded-max="rounded-full"
            >
              <h4
                class="faq-question flex items-center justify-between py-4 text-base font-medium text-white cursor-pointer sm:text-lg hover:text-white"
                data-primary="purple-600"
              >
                <span class="">{item.question}</span>
                <svg
                  class="w-4 h-4 mr-1 transition-all duration-200 ease-out transform rotate-0"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 9l-7 7-7-7"
                    class=""
                  />
                </svg>
              </h4>
              <p class="px-1 pt-0 mt-5 text-gray-300 sm:text-lg py-7 transition-all ease-out duration-300 hidden opacity-0 transform -translate-y-4">
                {item.answer}
              </p>
            </div>
          ))
        }
      </div>
      {/* <!-- Right side of FAQs --> */}
      <div
        class="relative w-full mt-3 space-y-3 lg:mt-0 lg:space-y-5 lg:w-1/2 lg:pl-4"
      >
        {/* <!-- Question 1 --> */}
        {
          rightSideQuestions.map((item, index) => (
            <div
              class="relative px-6 py-2 overflow-hidden text-white bg-gray-900 rounded-lg select-none border"
              data-primary="purple-600"
              data-rounded="rounded-lg"
              data-rounded-max="rounded-full"
            >
              <h4
                class="faq-question flex items-center justify-between py-4 text-base font-medium text-white cursor-pointer sm:text-lg hover:text-white"
                data-primary="purple-600"
              >
                <span class="">{item.question}</span>
                <svg
                  class="w-4 h-4 mr-1 transition-all duration-200 ease-out transform"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 9l-7 7-7-7"
                    class=""
                  />
                </svg>
              </h4>
              <p class="px-1 pt-0 mt-5 text-gray-300 sm:text-lg py-7 transition-all ease-out duration-300 hidden opacity-0 -translate-y-4 transform">
                {item.answer}
              </p>
            </div>
          ))
        }
      </div>
    </div>
  </div>
</section>

<script>
  const allQuestions = document.querySelectorAll(".faq-question");

  const toggleQuestion = (e, index) => {
    const question = e.currentTarget;
    const paragraph = question.nextElementSibling;
    const svg = question.querySelector("svg");

    if (paragraph.classList.contains("hidden")) {
      paragraph.classList.replace("hidden", "block");
      paragraph.classList.replace("-transform-y-4", "-transform-y-0");
      paragraph.classList.replace("opacity-0", "opacity-100");
      svg.style.transform = "rotate(-180deg)";
    } else {
      paragraph.classList.replace("block", "hidden");
      paragraph.classList.replace("-transform-y-0", "-transform-y-4");
      paragraph.classList.replace("opacity-100", "opacity-0");
      svg.style.transform = "rotate(0deg)";
    }
  };

  allQuestions.forEach((question, index) => {
    question.addEventListener("click", (e) => toggleQuestion(e, index));
  });
</script>
